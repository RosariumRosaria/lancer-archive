---
layout: layouts/base.njk
permalink: /login/
title: Access Terminal
---


<div class="card">
    {% sectionHeader "ACCESS TERMINAL" %}
    Credential Entry
    {% endsectionHeader %}

  <h3>Authentication Required</h3>
  <p>Enter your assigned access code. All access attempts are logged.</p>
  <hr>

  <form id="access-form">
    <label>
      <strong>Codename </strong><br>
      <input id="codename" type="text" autocomplete="off">
    </label>

    <div style="height: 0.75rem;"></div>

    <label>
      <strong>Access Code</strong><br>
      <input id="access-code" type="password" autocomplete="off" required>
    </label>

    <div style="height: 1rem;"></div>

    <div class="terminal-row">
      <button class="btn btn-primary" type="submit">Initiate Session</button>
      <a class="btn btn-ghost" href="/">Return to Index</a>
    </div>

    <p id="access-error" class="smallprint" style="display:none;">
      ACCESS DENIED. VERIFY CREDENTIALS.
    </p>
  </form>
    <p class="smallprint">
    If you do not have credentials, contact the designated administrar Oversight admin for temporary access issuance.
  </p>
</div>

<script>
  // If already “logged in”, bounce
  const session = window.ArchiveAuth?.getSession?.();
  if (session && (session.clearance === 0 || session.clearance)) {
    window.location.href = "/";
  }

  document.getElementById("access-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const code = document.getElementById("access-code").value.trim();
    const codename = document.getElementById("codename").value.trim();

    const record = window.ARCHIVE_ACCESS?.[code];
    const err = document.getElementById("access-error");

    if (!record) {
      err.style.display = "block";
      return;
    }

    // Use entered codename if provided, otherwise use the configured name
    const user = codename || record.user;

    window.ArchiveAuth.setSession(user, record.clearance);
    window.ArchiveAuth.applyHeaderBadge();

    window.location.href = "/";
  });
</script>
